## 动态内存

静态内存:保存局部static对象-如(在函数内部的```static int count = 0;```);
函数之外的变量,static数据成员;
栈内存:函数内非static对象,自动创建和销毁.

堆区:自由空间,动态内存分配空间,人为在程序中控制生命周期.

## 动态内存与智能指针
new分配,delete删除 (这两个运算符返回和接受一个指针);
易出现问题:
内存泄漏:忘记释放内存
非法指针:尚有指针引用内存的情况下释放这块内存.
三种智能指针:
shared_ptr:允许多个指针指向同一个对象;
unique_ptr:独占所指对象;
weak_ptr:弱引用,指向shared_ptr所管理的对象

### 1. shared_ptr类
独有操作: \
```make_shared<T>(args)```返回一个shared_ptr，指向动态分配的T，使用args初始化T；\
```shared_ptr<T>p(q)```拷贝操作，增加q中的计数器，q中的指针必须能转化为T*\
```p=q```递减p，递增q\
```p.unique()```若计数器为1返回true\
```p.use_count()```返回共享对象的指针数量

计数器+1：参数传递，传递给函数，函数返回值，
计数器-1：赋予新值，销毁

程序使用动态内存的情况：
程序不知道自己需要使用多少对象；不知道所需对象的准确类型；需要在多个对象间共享数据；